<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" >
  
    <title>Bolt</title>
    <meta name="author" content="Slack">
    <meta name="description" content="A framework that makes Slack app development fast and straight-forward.  With a single interface for Slack’s Web API, Events API, and interactive features,  Bolt gives you the full power of the Slack platform out of the box.">
    <link rel="canonical" href="http://localhost:4000/bolt/">
    <link href="https://a.slack-edge.com/17c88/style/rollup-slack_kit_legacy_adapters.css" rel="stylesheet" type="text/css">
    <link href="https://a.slack-edge.com/cc5205/style/rollup-api_site.css" rel="stylesheet" type="text/css">
    <link href="http://localhost:4000/bolt/assets/style.css" rel="stylesheet" type="text/css">
  
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    

    <!--[if lt IE 9]>
    <script src="https://a.slack-edge.com/ef0d/js/libs/html5shiv.js"></script>
    <![endif]-->
  
    <link id="favicon" rel="shortcut icon" href="https://a.slack-edge.com/4f28/img/icons/favicon-32.png" sizes="16x16 32x32 48x48" type="image/png" />
  
    <link rel="icon" href="https://a.slack-edge.com/4f28/img/icons/app-256.png" sizes="256x256" type="image/png" />
  
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://a.slack-edge.com/4f28/img/icons/ios-152.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://a.slack-edge.com/4f28/img/icons/ios-144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://a.slack-edge.com/4f28/img/icons/ios-120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://a.slack-edge.com/4f28/img/icons/ios-114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://a.slack-edge.com/4f28/img/icons/ios-72.png" />
    <link rel="apple-touch-icon-precomposed" href="https://a.slack-edge.com/4f28/img/icons/ios-57.png" />
  
    <meta name="msapplication-TileColor" content="#FFFFFF" />
    <meta name="msapplication-TileImage" content="https://a.slack-edge.com/4f28/img/icons/app-144.png" />
  
  </head>

<body>
  <div class="wrapper">
    <div class="panel">
      <div class="sidebar-content">
  <div class="logo">
    <span class="icon">
      <img src="http://localhost:4000/bolt/assets/bolt-logo.png">
    </span>

    <span class="name">
      Bolt
    </span>

    <span class="version">
      <a href="https://github.com/pages/slackapi/bolt"></a>
    </span>
  </div>

  <ul class="sidebar-section">
    <a href="#basic"><li class="title">Main concepts</li></a>
    
    
      <a href="http://localhost:4000/bolt/#message-listening"><li>Listening to messages</li></a>
    
      <a href="http://localhost:4000/bolt/#message-sending"><li>Sending messages</li></a>
    
      <a href="http://localhost:4000/bolt/#web-api"><li>Using the Web API</li></a>
    
      <a href="http://localhost:4000/bolt/#event-listening"><li>Listening to events</li></a>
    
      <a href="http://localhost:4000/bolt/#event-responding"><li>Responding to events</li></a>
    
      <a href="http://localhost:4000/bolt/#action-listening"><li>Listening to actions</li></a>
    
      <a href="http://localhost:4000/bolt/#action-acknowledge"><li>Acknowleding actions</li></a>
    
      <a href="http://localhost:4000/bolt/#action-respond"><li>Responding to actions</li></a>
    
      <a href="http://localhost:4000/bolt/#commands"><li>Listening and responding to commands</li></a>
    
  </ul>

  <ul class="sidebar-section">
    <a href="#advanced"><li class="title">Advanced concepts</li></a>
    
      <a href="http://localhost:4000/bolt/#error-handling"><li>Handling errors</li></a>
    
  </ul>
</div>

    </div>


    <div class="content">
        <div class="mainheader">
          <div class="header">
  <div class="header_nav">
    <a href="https://github.com/SlackAPI/bolt" class="btn header_btn float_right"><ts-icon class="ts_icon_github"></ts-icon>Code on GitHub</a>
    <a href="https://api.slack.com" class="btn header_btn float_right"><ts-icon class="ts_icon_slack_pillow"></ts-icon>Slack Platform Home</a>
  </div>
</div>
        </div>

        <div id="basic">
        
        
          <div class="section-wrapper">
            <h3 id="message-listening">Listening to messages</h3>

            <div class="section-content">
  <p>To listen to messages that <a href="https://api.slack.com/messaging/retrieving#permissions">your app has access to receive</a>, you can use the <code class="highlighter-rouge">message()</code> method. This method adds listener middleware that filters out any events that aren’t of type <code class="highlighter-rouge">message</code>.</p>

  <p>It accepts an optional <code class="highlighter-rouge">pattern</code> parameter of type <code class="highlighter-rouge">string</code> or <code class="highlighter-rouge">RegExp</code> object that will filter out any messages that don’t match.</p>
</div>

<div class="language-javascript highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code><span class="c1">// This will match any message that contains 👋</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">message</span><span class="p">(</span><span class="s1">':wave:'</span><span class="p">,</span> <span class="k">async</span> <span class="p">({</span> <span class="nx">message</span><span class="p">,</span> <span class="nx">say</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">say</span><span class="p">(</span><span class="s2">`Hello, &lt;@</span><span class="p">${</span><span class="nx">message</span><span class="p">.</span><span class="nx">user</span><span class="p">}</span><span class="s2">&gt;`</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
  </div>
</div>

<details>
  <summary class="section-head">
    <h4 class="section-head">Using a RegExp pattern</h4>
  </summary>

  <div class="secondary-wrapper">

    <div class="secondary-content">
      <p>A RegExp pattern can be used instead of a string for more granular matching.</p>

      <p>All of the results of the RegExp match will be in <code class="highlighter-rouge">context.matches</code>.</p>
    </div>

    <div class="language-javascript highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">message</span><span class="p">(</span><span class="sr">/^</span><span class="se">(</span><span class="sr">hi|hello|hey</span><span class="se">)</span><span class="sr">.*/</span><span class="p">,</span> <span class="k">async</span> <span class="p">({</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">say</span> <span class="p">})</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="p">{</span>
  <span class="c1">// RegExp matches are inside of context.matches</span>
  <span class="kd">const</span> <span class="nx">greeting</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">matches</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
  
  <span class="nx">say</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">greeting</span><span class="p">}</span><span class="s2">, how are you?`</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>    </div>

  </div>
</details>


            <hr>
          </div>
        
          <div class="section-wrapper">
            <h3 id="message-sending">Sending messages</h3>

            <div class="section-content">
  <p>If you’re using a built-in method (<code class="highlighter-rouge">message()</code>, <code class="highlighter-rouge">event()</code>, <code class="highlighter-rouge">action()</code>, <code class="highlighter-rouge">command()</code>, or <code class="highlighter-rouge">options()</code>), <code class="highlighter-rouge">say()</code> is available to your listener middleware whenever there is an associated channel (the conversation a message was posted in, for example). <code class="highlighter-rouge">say()</code> accepts a string to post simple text-based messages and JSON payloads to send more complex messages. The message payload you pass in will be sent to the associated channel.</p>

  <p>In the case that you aren’t in listener middleware for one of the built-in methods or you want to do something more advanced (like handle specific errors), you can call <code class="highlighter-rouge">chat.postMessage</code> <a href="#web-api">using the client attached to your Bolt instance</a>.</p>
</div>

<div class="language-javascript highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">command</span><span class="p">(</span><span class="s1">'bold'</span><span class="p">,</span> <span class="k">async</span> <span class="p">({</span> <span class="nx">command</span><span class="p">,</span> <span class="nx">say</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">say</span><span class="p">(</span><span class="s2">`*</span><span class="p">${</span><span class="nx">command</span><span class="p">.</span><span class="nx">text</span><span class="p">}</span><span class="s2">*`</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
  </div>
</div>

<details>
  <summary>
    <h4 class="section-head">Sending a message with blocks</h4>
  </summary>

  <div class="secondary-wrapper">

    <div class="secondary-content">
      <p><code class="highlighter-rouge">say()</code> accepts more complex message payloads to make it easy to add functionality and structure to your messages.</p>

      <p>To explore adding rich message layouts to your app, read through <a href="https://api.slack.com/messaging/composing/layouts">the guide on our API site</a> and look through templates of common app flows <a href="https://api.slack.com/tools/block-kit-builder?template=1">in the Block Kit Builder</a>.</p>
    </div>

    <div class="language-javascript highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1">// Sends a section block with datepicker when someone reacts with a 📅 emoji</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">event</span><span class="p">(</span><span class="s1">'reaction_added'</span><span class="p">,</span> <span class="k">async</span> <span class="p">({</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">say</span> <span class="p">})</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">reaction</span> <span class="o">===</span> <span class="s1">'calendar'</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">say</span><span class="p">({</span>
      <span class="na">blocks</span><span class="p">:</span> <span class="p">[{</span>
          <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"section"</span><span class="p">,</span>
          <span class="s2">"text"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"mrkdwn"</span><span class="p">,</span>
            <span class="s2">"text"</span><span class="p">:</span> <span class="s2">"Pick a date for me to remind you"</span>
          <span class="p">},</span>
          <span class="s2">"accessory"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"datepicker"</span><span class="p">,</span>
            <span class="s2">"action_id"</span><span class="p">:</span> <span class="s2">"datepicker_remind"</span><span class="p">,</span>
            <span class="s2">"initial_date"</span><span class="p">:</span> <span class="s2">"2019-04-28"</span><span class="p">,</span>
            <span class="s2">"placeholder"</span><span class="p">:</span> <span class="p">{</span>
              <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"plain_text"</span><span class="p">,</span>
              <span class="s2">"text"</span><span class="p">:</span> <span class="s2">"Select a date"</span>
             <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}]});</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>    </div>

  </div>
</details>


            <hr>
          </div>
        
          <div class="section-wrapper">
            <h3 id="web-api">Using the Web API</h3>

            <div class="section-content">
  <p>You can call <a href="https://api.slack.com/methods">any Web API method</a> using the client attached to your Bolt instance under the <code class="highlighter-rouge">client</code> key (given that your app has the appropriate scopes). When you call one of the methods on the <code class="highlighter-rouge">client</code>, it will return a promise containing the response from Slack.</p>

  <p>The token used to initialize Bolt can be found in the <code class="highlighter-rouge">context</code> object, which can be helpful when you’re making calls and need to pass the token yourself.</p>
</div>

<div class="language-javascript highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code><span class="c1">// Unix Epoch time for September 30, 2019 11:59:59 PM</span>
<span class="kd">const</span> <span class="nx">whenSeptemberEnds</span> <span class="o">=</span> <span class="mi">1569887999</span><span class="p">;</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">message</span><span class="p">(</span><span class="s1">'wake me up'</span><span class="p">,</span> <span class="k">async</span> <span class="p">({</span> <span class="nx">message</span><span class="p">,</span> <span class="nx">context</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="c1">// Call the chat.scheduleMessage method</span>
    <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">app</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">chat</span><span class="p">.</span><span class="nx">scheduleMessage</span><span class="p">({</span>
      <span class="na">token</span><span class="p">:</span> <span class="nx">context</span><span class="p">.</span><span class="nx">botToken</span><span class="p">,</span>
      <span class="na">channel</span><span class="p">:</span> <span class="nx">message</span><span class="p">.</span><span class="nx">channel</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
      <span class="na">post_at</span><span class="p">:</span> <span class="nx">whenSeptemberEnds</span><span class="p">,</span>
      <span class="na">text</span><span class="p">:</span> <span class="s1">'Summer has come and passed'</span>
    <span class="p">});</span>
  <span class="p">}</span>
  <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre>
  </div>
</div>


            <hr>
          </div>
        
          <div class="section-wrapper">
            <h3 id="event-listening">Listening to events</h3>

            <div class="section-content">
  <p>You can listen to <a href="https://api.slack.com/events">any Events API event</a> using the <code class="highlighter-rouge">event()</code> method. This allows your app to take action when something happens in Slack, like a user reacting to a message or joining a channel.</p>

  <p>The <code class="highlighter-rouge">event()</code> method requires an <code class="highlighter-rouge">eventType</code> of type string.</p>
</div>

<div class="language-javascript highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code><span class="kd">const</span> <span class="nx">welcomeChannelId</span> <span class="o">=</span> <span class="s1">'C12345'</span><span class="p">;</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">event</span><span class="p">(</span><span class="s1">'team_join'</span><span class="p">,</span> <span class="k">async</span> <span class="p">({</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">context</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">app</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">chat</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">({</span>
      <span class="na">token</span><span class="p">:</span> <span class="nx">context</span><span class="p">.</span><span class="nx">botToken</span><span class="p">,</span>
      <span class="na">channel</span><span class="p">:</span> <span class="nx">welcomeChannelId</span><span class="p">,</span>
      <span class="na">text</span><span class="p">:</span> <span class="s2">`Welcome to the team, &lt;@</span><span class="p">${</span><span class="nx">event</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="s2">&gt;! 🎉 You can introduce yourself in this channel.`</span>
    <span class="p">});</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre>
  </div>
</div>

<details>
  <summary class="section-head">
    <h4 class="section-head">Filtering on event subtypes</h4>
  </summary>

  <div class="secondary-wrapper">

    <div class="secondary-content">
      <p>You can filter on subtypes of events by using the built-in <code class="highlighter-rouge">matchEventSubtype()</code> middleware. Common message subtypes like <code class="highlighter-rouge">bot_message</code> and <code class="highlighter-rouge">message_replied</code> can be found <a href="https://api.slack.com/events/message#message_subtypes">on the message event page</a>.</p>
    </div>

    <div class="language-javascript highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1">// event('message') is the same as message()</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">event</span><span class="p">(</span><span class="s1">'message'</span><span class="p">,</span> <span class="nx">matchEventSubtype</span><span class="p">(</span><span class="s1">'bot_message'</span><span class="p">),</span> <span class="k">async</span> <span class="p">({</span> <span class="nx">event</span> <span class="p">})</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`The bot user </span><span class="p">${</span><span class="nx">event</span><span class="p">.</span><span class="nx">user</span><span class="p">}</span><span class="s2"> said </span><span class="p">${</span><span class="nx">event</span><span class="p">.</span><span class="nx">text</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>    </div>

  </div>
</details>


            <hr>
          </div>
        
          <div class="section-wrapper">
            <h3 id="event-responding">Responding to events</h3>

            <div class="section-content">
  <p>The easiest way to respond to events is using the <code class="highlighter-rouge">say</code> function, which exists in any listener middleware function when a channel exists in the event payload. The <code class="highlighter-rouge">say</code> function accepts a message payload of type string for simple text responses, and of type object for more complex responses.</p>
</div>

<div class="language-javascript highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code><span class="c1">// app_home_opened is triggered when a user opens your App's DM</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">event</span><span class="p">(</span><span class="s1">'app_home_opened'</span><span class="p">,</span> <span class="k">async</span> <span class="p">({</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">say</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">say</span><span class="p">(</span><span class="s2">`Hi &lt;@</span><span class="p">${</span><span class="nx">event</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="s2">&gt; :wave: If you've never used me before you can type 'help' to see all of my features`</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
  </div>
</div>


            <hr>
          </div>
        
          <div class="section-wrapper">
            <h3 id="action-listening">Listening to actions</h3>

            <div class="section-content">
  <p>Your app can listen to user actions like button clicks, menu selects, and message actions using the <code class="highlighter-rouge">action</code> method.</p>

  <p>Actions can be filtered on  an <code class="highlighter-rouge">action_id</code> of type string or RegExp. <code class="highlighter-rouge">action_id</code>s act as unique identifiers for interactive components on the Slack platform.</p>

  <p>You’ll notice in all <code class="highlighter-rouge">action()</code> examples, <code class="highlighter-rouge">ack()</code> is used. It is required to call the <code class="highlighter-rouge">ack()</code> function within an action listener to acknowledge the event was received from Slack. This is discussed in the <a href="#action-acknowledging">acknowledging actions section</a>.</p>

</div>

<div class="language-javascript highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code><span class="c1">// Your middleware will be called every time an interactive component with the action_id "approve_button" is triggered</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">action</span><span class="p">(</span><span class="s1">'approve_button'</span><span class="p">,</span> <span class="k">async</span> <span class="p">({</span> <span class="nx">ack</span><span class="p">,</span> <span class="nx">say</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">ack</span><span class="p">();</span>
  <span class="c1">// Update the message to reflect the action</span>
<span class="p">});</span>
</code></pre>
  </div>
</div>

<details>
  <summary class="section-head">
    <h4 class="section-head">Listening to actions using a constraint object</h4>
  </summary>

  <div class="secondary-wrapper">

    <div class="secondary-content">
      <p>You can use a constraints object to listen to <code class="highlighter-rouge">callback_id</code>s, <code class="highlighter-rouge">block_id</code>s, and <code class="highlighter-rouge">action_id</code>s (or any combination of them). Constraints in the object can be of type string or RegExp.</p>
    </div>

    <div class="language-javascript highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1">// Your middleware will only be called when the action_id matches 'select_user' AND the block_id matches 'assign_ticket'</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">action</span><span class="p">({</span> <span class="na">action_id</span><span class="p">:</span> <span class="s1">'select_user'</span><span class="p">,</span> <span class="na">block_id</span><span class="p">:</span> <span class="s1">'assign_ticket'</span> <span class="p">},</span>
  <span class="k">async</span> <span class="p">({</span> <span class="nx">action</span><span class="p">,</span> <span class="nx">ack</span><span class="p">,</span> <span class="nx">context</span> <span class="p">})</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="p">{</span>
    <span class="nx">ack</span><span class="p">();</span>
    <span class="k">try</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">app</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">reactions</span><span class="p">.</span><span class="nx">add</span><span class="p">({</span>
        <span class="na">token</span><span class="p">:</span> <span class="nx">context</span><span class="p">.</span><span class="nx">botToken</span><span class="p">,</span>
        <span class="na">name</span><span class="p">:</span> <span class="s1">'white_check_mark'</span><span class="p">,</span>
        <span class="na">timestamp</span><span class="p">:</span> <span class="nx">action</span><span class="p">.</span><span class="nx">action_ts</span><span class="p">,</span>
        <span class="na">channel</span><span class="p">:</span> <span class="nx">action</span><span class="p">.</span><span class="nx">channel</span><span class="p">.</span><span class="nx">id</span>
      <span class="p">});</span>
    <span class="p">}</span>
    <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>    </div>

  </div>
</details>


            <hr>
          </div>
        
          <div class="section-wrapper">
            <h3 id="action-acknowledge">Acknowleding actions</h3>

            <div class="section-content">
  <p>Actions must <strong>always</strong> be acknowledged using the <code class="highlighter-rouge">ack()</code> function. This lets Slack know that the action was received and updates the Slack user interface accordingly. Depending on the type of action, your acknowledgement may be different. For example, when responding to a dialog submission you will call <code class="highlighter-rouge">ack()</code> with validation errors if the submission contains errors, or with no parameters if the submission is valid.</p>

  <p>We recommend calling <code class="highlighter-rouge">ack()</code> right away before sending a new message or fetching information from your database since you only have 3 seconds to respond.</p>
</div>

<div class="language-javascript highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code><span class="c1">// Regex to determine if this is a valid email</span>
<span class="kd">let</span> <span class="nx">isEmail</span> <span class="o">=</span> <span class="o">^</span><span class="p">[</span><span class="err">\</span><span class="nx">w</span><span class="o">-</span><span class="err">\</span><span class="p">.]</span><span class="o">+</span><span class="p">@([</span><span class="err">\</span><span class="nx">w</span><span class="o">-</span><span class="p">]</span><span class="o">+</span><span class="err">\</span><span class="p">.)</span><span class="o">+</span><span class="p">[</span><span class="err">\</span><span class="nx">w</span><span class="o">-</span><span class="p">]{</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">}</span><span class="nx">$</span>
<span class="c1">// This uses a constraint object to listen for dialog submissions with a callback_id of ticket_submit </span>
<span class="nx">app</span><span class="p">.</span><span class="nx">action</span><span class="p">({</span> <span class="na">callback_id</span><span class="p">:</span> <span class="s1">'ticket_submit'</span> <span class="p">},</span> <span class="p">({</span> <span class="nx">action</span><span class="p">,</span> <span class="nx">ack</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="c1">// it’s a valid email, accept the submission</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">isEmail</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">submission</span><span class="p">.</span><span class="nx">email</span><span class="p">))</span> <span class="p">{</span>
	  <span class="nx">ack</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="c1">// if it isn’t a valid email, respond with an error</span>
	  <span class="nx">ack</span><span class="p">({</span>
		  <span class="na">errors</span><span class="p">:</span> <span class="p">[{</span>
			  <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"email_address"</span><span class="p">,</span>
			  <span class="s2">"error"</span><span class="p">:</span> <span class="s2">"Sorry, this isn’t a valid email"</span>
      <span class="p">}]</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre>
  </div>
</div>


            <hr>
          </div>
        
          <div class="section-wrapper">
            <h3 id="action-respond">Responding to actions</h3>

            <div class="section-content">
  <p>There are two main ways to respond to actions. The first way (and the most common way) is using the <code class="highlighter-rouge">say</code> function. The <code class="highlighter-rouge">say</code> function sends a message back to the conversation where the incoming event took place.</p>

  <p>The second way to respond to actions is using <code class="highlighter-rouge">respond()</code>. This is a simple utility to use the <code class="highlighter-rouge">response_url</code> associated with an action.</p>
</div>

<div class="language-javascript highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code><span class="c1">// Your middleware will be called every time an interactive component with the action_id “approve_button” is triggered</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">action</span><span class="p">(</span><span class="s1">'approve_button'</span><span class="p">,</span> <span class="k">async</span> <span class="p">({</span> <span class="nx">ack</span><span class="p">,</span> <span class="nx">say</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">ack</span><span class="p">();</span>
  <span class="nx">say</span><span class="p">(</span><span class="s1">'Request approved 👍'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
  </div>
</div>

<details>
  <summary class="section-head">
    <h4 class="section-head">Using respond</h4>
  </summary>

  <div class="secondary-wrapper">

    <div class="secondary-content">
      <p>In addition to using <code class="highlighter-rouge">say()</code>, you can respond to them using <code class="highlighter-rouge">respond()</code>. <code class="highlighter-rouge">respond()</code> is a utility for calling the <code class="highlighter-rouge">response_url</code>, so it behaves in the same way. You can pass a JSON object with a new message payload that will be published back to the source of the original interaction. Response URLs are covered in more depth <a href="https://api.slack.com/messaging/interactivity">on our API site</a>.</p>
    </div>

    <div class="language-javascript highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1">// Listens to actions triggered with action_id of “user_select”</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">action</span><span class="p">(</span><span class="s1">'user_select'</span><span class="p">,</span> <span class="k">async</span> <span class="p">({</span> <span class="nx">action</span><span class="p">,</span> <span class="nx">ack</span><span class="p">,</span> <span class="nx">respond</span> <span class="p">})</span> <span class="o">=&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="p">{</span>
	<span class="nx">ack</span><span class="p">();</span>
	<span class="nx">respond</span><span class="p">(</span><span class="s2">`You selected &amp;lt;@</span><span class="p">${</span><span class="nx">action</span><span class="p">.</span><span class="nx">selected_user</span><span class="p">}</span><span class="s2">&amp;gt;`</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>    </div>

  </div>
</details>


            <hr>
          </div>
        
          <div class="section-wrapper">
            <h3 id="commands">Listening and responding to commands</h3>

            <div class="section-content">
  <p>Your app can use the <code class="highlighter-rouge">command()</code> method to listen to incoming slash command payloads. The method requires a <code class="highlighter-rouge">commandName</code> of type string that matches the incoming command name.</p>

  <p>Similar to actions, there are two ways to respond to slash command requests. The first way is to use <code class="highlighter-rouge">say()</code>, which accepts a string or JSON payload. The second is <code class="highlighter-rouge">respond()</code> which uses the <code class="highlighter-rouge">response_url</code>.</p>
</div>

<div class="language-javascript highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code><span class="c1">// The echo command simply echoes on command</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">command</span><span class="p">(</span><span class="s1">'echo'</span><span class="p">,</span> <span class="k">async</span> <span class="p">({</span> <span class="nx">command</span><span class="p">,</span> <span class="nx">say</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">say</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">command</span><span class="p">.</span><span class="nx">text</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
  </div>
</div>


            <hr>
          </div>
        
        </div>

        <div id="advanced">
        
          <div class="section-wrapper">
            <h3 id="error-handling">Handling errors</h3>

            <div class="section-content">
  <p>If an error occurs in a listener middleware, it’s recommended you handle it directly. However, there are cases where errors may occur after your listener middleware has returned (like <code class="highlighter-rouge">say()</code> and <code class="highlighter-rouge">respond()</code>, or not calling <code class="highlighter-rouge">ack()</code>). By default, these errors will be logged to the console. To handle them yourself, you can attach a global error handler to your app using the <code class="highlighter-rouge">App.prototype.error(fn)</code> method.</p>

  <p>If you want more control over errors, it’s advised to use the <code class="highlighter-rouge">chat.postMessage</code> method attached to your app under the <code class="highlighter-rouge">client</code> key. This returns a <code class="highlighter-rouge">Promise</code> that can be caught to handle the error.</p>
</div>

<div class="language-javascript highlighter-rouge">
  <div class="highlight">
    <pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">error</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="c1">// Check the details of the error to handle cases where you should retry sending a message or stop the app</span>
	<span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
  </div>
</div>


            <hr>
          </div>
        
        </div>
    </div>

  </div>
</body>
</html>